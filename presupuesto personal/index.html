<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EcoFlow - Presupuesto Personal</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #fff;
      color: #000;
      transition: background-color 0.3s, color 0.3s;
    }
    .titulo {
      font-size: 64px;
      font-weight: bold;
      color: #2ECC71;
      text-align: center;
      margin: 40px 0;
      transition: color 0.3s;
    }
    .controles {
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    button, input[type="file"], #actualizarMetaBtn {
      background: #4e79a7;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    button:hover, #actualizarMetaBtn:hover {
      background: #3a5a85;
    }
    .tarjetas {
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .tarjeta {
      background: #f1f6fc;
      border-radius: 10px;
      padding: 15px;
      width: 140px;
      text-align: center;
      transition: background-color 0.3s, color 0.3s;
      box-sizing: border-box;
    }
    .tarjeta svg {
      width: 32px;
      height: 32px;
      margin-bottom: 8px;
      fill: #007BFF;
      transition: fill 0.3s;
    }
    .valor {
      font-size: 18px;
      margin-bottom: 4px;
      color: #000;
      transition: color 0.3s;
    }
    .categoria {
      font-weight: bold;
      color: #000;
      transition: color 0.3s;
    }
    #metaAhorro {
      width: 60px;
      padding: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
      transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }
    #metaContainerWrapper {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 20px 0;
      flex-wrap: wrap;
      gap: 10px;
    }
    #metaContainer {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-grow: 1;
    }
    #progresoMeta {
      width: 100%;
      height: 20px;
      appearance: none;
      border-radius: 10px;
      overflow: hidden;
      margin-top: 10px;
      background-color: #e0e0e0;
      transition: background-color 0.3s;
    }
    #progresoMeta::-webkit-progress-bar {
      background-color: #e0e0e0;
    }
    #progresoMeta::-webkit-progress-value {
      background-color: #4caf50;
      transition: background-color 0.3s;
    }
    #progresoMeta::-moz-progress-bar {
      background-color: #4caf50;
      transition: background-color 0.3s;
    }
    #textoProgreso {
      text-align: center;
      margin-top: 5px;
      font-weight: bold;
      color: #000;
      transition: color 0.3s;
    }
    .graficos {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 40px;
      flex-wrap: wrap;
    }
    canvas {
      max-width: 300px;
      max-height: 300px;
    }

    /* MODO OSCURO */
    body.modo-oscuro {
      background: #1e1e1e;
      color: #f0f0f0;
    }
    body.modo-oscuro .titulo {
      color: #7cfc9f; /* un verde claro para título */
    }
    body.modo-oscuro button,
    body.modo-oscuro #actualizarMetaBtn,
    body.modo-oscuro input[type="file"] {
      background: #333;
      color: #fff;
    }
    body.modo-oscuro button:hover,
    body.modo-oscuro #actualizarMetaBtn:hover {
      background: #4a4a4a;
    }
    body.modo-oscuro .tarjeta {
      background: #2c2c2c;
      color: #f0f0f0;
    }
    body.modo-oscuro .tarjeta svg {
      fill: #4e79a7;
    }
    body.modo-oscuro .valor,
    body.modo-oscuro .categoria {
      color: #f0f0f0;
    }
    body.modo-oscuro #metaAhorro {
      background-color: #2c2c2c;
      color: #f0f0f0;
      border-color: #555;
    }
    body.modo-oscuro #progresoMeta {
      background-color: #3a3a3a;
    }
    body.modo-oscuro #progresoMeta::-webkit-progress-value {
      background-color: #3cb371; /* verde más claro para barra */
    }
    body.modo-oscuro #progresoMeta::-moz-progress-bar {
      background-color: #3cb371;
    }
    body.modo-oscuro #textoProgreso {
      color: #f0f0f0;
    }

    /* Color específico para Total Gastos */
    .tarjeta.total-gastos svg,
    .tarjeta.total-gastos .valor {
      fill: #e74c3c; /* rojo para ícono */
      color: #e74c3c; /* rojo para texto */
    }

    /* Color específico para Balance */
    .tarjeta.balance svg,
    .tarjeta.balance .valor {
      fill: #27ae60; /* verde para ícono */
      color: #27ae60; /* verde para texto */
    }

    /* Modo oscuro - colores para Total Gastos */
    body.modo-oscuro .tarjeta.total-gastos svg,
    body.modo-oscuro .tarjeta.total-gastos .valor {
      fill: #e74c3c;
      color: #e74c3c;
    }

    /* Modo oscuro - colores para Balance */
    body.modo-oscuro .tarjeta.balance svg,
    body.modo-oscuro .tarjeta.balance .valor {
      fill: #27ae60;
      color: #27ae60;
    }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
  <h1 class="titulo">EcoFlow</h1>
  <div class="controles">
    <input type="file" id="archivoExcel" accept=".xlsx" />
    <button id="exportarPDF">Exportar PDF</button>
    <button id="btnSemana">Semanal</button>
    <button id="btnQuincena">Quincenal</button>
    <button id="btnMes">Mensual</button>
    <button id="modoToggle">Modo Claro/Oscuro</button>
  </div>
  <div class="tarjetas">
<div class="tarjeta">
  <!-- SVG ingresos personalizado -->
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
    <path fill-rule="evenodd" d="M7.5 5.25a3 3 0 0 1 3-3h3a3 3 0 0 1 3 3v.205c.933.085 1.857.197 2.774.334 1.454.218 2.476 1.483 2.476 2.917v3.033c0 1.211-.734 2.352-1.936 2.752A24.726 24.726 0 0 1 12 15.75c-2.73 0-5.357-.442-7.814-1.259-1.202-.4-1.936-1.541-1.936-2.752V8.706c0-1.434 1.022-2.7 2.476-2.917A48.814 48.814 0 0 1 7.5 5.455V5.25Zm7.5 0v.09a49.488 49.488 0 0 0-6 0v-.09a1.5 1.5 0 0 1 1.5-1.5h3a1.5 1.5 0 0 1 1.5 1.5Zm-3 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd" />
    <path d="M3 18.4v-2.796a4.3 4.3 0 0 0 .713.31A26.226 26.226 0 0 0 12 17.25c2.892 0 5.68-.468 8.287-1.335.252-.084.49-.189.713-.311V18.4c0 1.452-1.047 2.728-2.523 2.923-2.12.282-4.282.427-6.477.427a49.19 49.19 0 0 1-6.477-.427C4.047 21.128 3 19.852 3 18.4Z" />
  </svg>
  <div class="valor" id="valorIngresos">S/ 0.00</div>
  <div class="categoria">Ingresos</div>
</div>
<div class="tarjeta">
  <!-- SVG servicios personalizado -->
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
    <path d="M12 .75a8.25 8.25 0 0 0-4.135 15.39c.686.398 1.115 1.008 1.134 1.623a.75.75 0 0 0 .577.706c.352.083.71.148 1.074.195.323.041.6-.218.6-.544v-4.661a6.714 6.714 0 0 1-.937-.171.75.75 0 1 1 .374-1.453 5.261 5.261 0 0 0 2.626 0 .75.75 0 1 1 .374 1.452 6.712 6.712 0 0 1-.937.172v4.66c0 .327.277.586.6.545.364-.047.722-.112 1.074-.195a.75.75 0 0 0 .577-.706c.02-.615.448-1.225 1.134-1.623A8.25 8.25 0 0 0 12 .75Z" />
    <path fill-rule="evenodd" d="M9.013 19.9a.75.75 0 0 1 .877-.597 11.319 11.319 0 0 0 4.22 0 .75.75 0 1 1 .28 1.473 12.819 12.819 0 0 1-4.78 0 .75.75 0 0 1-.597-.876ZM9.754 22.344a.75.75 0 0 1 .824-.668 13.682 13.682 0 0 0 2.844 0 .75.75 0 1 1 .156 1.492 15.156 15.156 0 0 1-3.156 0 .75.75 0 0 1-.668-.824Z" clip-rule="evenodd" />
  </svg>
  <div class="valor" id="valorServicios">S/ 0.00</div>
  <div class="categoria">Servicios</div>
</div>
<div class="tarjeta">
  <!-- SVG alimentos personalizado -->
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
    <path d="M2.25 2.25a.75.75 0 0 0 0 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 0 0-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 0 0 0-1.5H5.378A2.25 2.25 0 0 1 7.5 15h11.218a.75.75 0 0 0 .674-.421 60.358 60.358 0 0 0 2.96-7.228.75.75 0 0 0-.525-.965A60.864 60.864 0 0 0 5.68 4.509l-.232-.867A1.875 1.875 0 0 0 3.636 2.25H2.25ZM3.75 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM16.5 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z" />
  </svg>
  <div class="valor" id="valorAlimentos">S/ 0.00</div>
  <div class="categoria">Alimentos</div>
</div>
<div class="tarjeta">
  <!-- SVG salud personalizado -->
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
    <path d="m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z" />
  </svg>
  <div class="valor" id="valorSalud">S/ 0.00</div>
  <div class="categoria">Salud</div>
</div>
<div class="tarjeta">
  <!-- SVG préstamos personalizado -->
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
    <path d="M21 6.375c0 2.692-4.03 4.875-9 4.875S3 9.067 3 6.375 7.03 1.5 12 1.5s9 2.183 9 4.875Z" />
    <path d="M12 12.75c2.685 0 5.19-.586 7.078-1.609a8.283 8.283 0 0 0 1.897-1.384c.016.121.025.244.025.368C21 12.817 16.97 15 12 15s-9-2.183-9-4.875c0-.124.009-.247.025-.368a8.285 8.285 0 0 0 1.897 1.384C6.809 12.164 9.315 12.75 12 12.75Z" />
    <path d="M12 16.5c2.685 0 5.19-.586 7.078-1.609a8.282 8.282 0 0 0 1.897-1.384c.016.121.025.244.025.368 0 2.692-4.03 4.875-9 4.875s-9-2.183-9-4.875c0-.124.009-.247.025-.368a8.284 8.284 0 0 0 1.897 1.384C6.809 15.914 9.315 16.5 12 16.5Z" />
    <path d="M12 20.25c2.685 0 5.19-.586 7.078-1.609a8.282 8.282 0 0 0 1.897-1.384c.016.121.025.244.025.368 0 2.692-4.03 4.875-9 4.875s-9-2.183-9-4.875c0-.124.009-.247.025-.368a8.284 8.284 0 0 0 1.897 1.384C6.809 19.664 9.315 20.25 12 20.25Z" />
  </svg>
  <div class="valor" id="valorPrestamos">S/ 0.00</div>
  <div class="categoria">Préstamos</div>
</div>
    <div class="tarjeta">
      <!-- SVG otros -->
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm0 8.625a1.125 1.125 0 1 0 0 2.25 1.125 1.125 0 0 0 0-2.25ZM15.375 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 10.875a1.125 1.125 0 1 0 0 2.25 1.125 1.125 0 0 0 0-2.25Z" clip-rule="evenodd" />
      </svg>
      <div class="valor" id="valorOtros">S/ 0.00</div>
      <div class="categoria">Otros</div>
    </div>
    <div class="tarjeta total-gastos">
      <!-- SVG total gastos -->
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path fill-rule="evenodd" d="M2.515 10.674a1.875 1.875 0 0 0 0 2.652L8.89 19.7c.352.351.829.549 1.326.549H19.5a3 3 0 0 0 3-3V6.75a3 3 0 0 0-3-3h-9.284c-.497 0-.974.198-1.326.55l-6.375 6.374ZM12.53 9.22a.75.75 0 1 0-1.06 1.06L13.19 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06l1.72-1.72 1.72 1.72a.75.75 0 1 0 1.06-1.06L15.31 12l1.72-1.72a.75.75 0 1 0-1.06-1.06l-1.72 1.72-1.72-1.72Z" clip-rule="evenodd" />
      </svg>
      <div class="valor" id="valorGastos">S/ 0.00</div>
      <div class="categoria">Total Gastos</div>
    </div>
    <div class="tarjeta balance">
      <!-- SVG balance -->
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path fill-rule="evenodd" d="M11.47 2.47a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06l-6.22-6.22V21a.75.75 0 0 1-1.5 0V4.81l-6.22 6.22a.75.75 0 1 1-1.06-1.06l7.5-7.5Z" clip-rule="evenodd" />
      </svg>
      <div class="valor" id="valorBalance">S/ 0.00</div>
      <div class="categoria">Balance</div>
    </div>
  </div>

  <div id="metaContainerWrapper">
    <div id="metaContainer">
      <label for="metaAhorro">Meta de ahorro:</label>
      <input type="number" id="metaAhorro" placeholder="1000" />
      <button id="actualizarMetaBtn">Actualizar Meta</button>
    </div>
  </div>

  <progress id="progresoMeta" value="0" max="100"></progress>
  <div id="textoProgreso">0% de la meta alcanzado</div>

  <div class="graficos">
    <canvas id="graficaGastos"></canvas>
    <canvas id="graficaBarra"></canvas>
  </div>

  <script src="main.js"></script>
</body>
</html>
